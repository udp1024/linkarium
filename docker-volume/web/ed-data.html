<!DOCTYPE html>
<html>
<head>
    <title>Edit JSON Data</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div id="content"></div>
    <button id="add">Add New Item</button>

    <script>
        // Fetch the JSON data from the server
        fetch('json/data.json')
        .then(response => response.json())
        .then(data => {
            // Generate the form for each item in the data
            data.forEach(function(item, index) {
                addForm(item, index);
            });

            // Handle the Add New Item button click
            $('#add').click(function() {
                var newItem = {
                    "icon": "",
                    "name": "",
                    "description": "",
                    "link": ""
                };
                data.push(newItem);
                addForm(newItem, data.length - 1);
            });
        })
        .catch(error => console.error('Error:', error));

        function addForm(item, index) {
            var formHtml = '<form id="form' + index + '">';
            formHtml += 'Icon: <input type="text" name="icon" value="' + item.icon + '"><br>';
            formHtml += 'Name: <input type="text" name="name" value="' + item.name + '"><br>';
            formHtml += 'Description: <input type="text" name="description" value="' + item.description + '"><br>';
            formHtml += 'Link: <input type="text" name="link" value="' + item.link + '"><br>';
            formHtml += '<input type="submit" value="Save Changes">';
            formHtml += '<button class="delete" data-index="' + index + '">Delete</button>';
            formHtml += '</form><hr>';
            $('#content').append(formHtml);

            // Handle the form submission
            $('#form' + index).submit(function(e) {
                e.preventDefault();
                var formData = $(this).serializeArray();
                var updatedItem = {};
                formData.forEach(function(field) {
                    updatedItem[field.name] = field.value;
                });
                data[index] = updatedItem;
                console.log('Updated data:', data);
                // Here you can add the code to save the updated data back to the server
            });

            // Handle the Delete button click
            $('.delete').click(function() {
                var index = $(this).data('index');
                data.splice(index, 1);
                console.log('Updated data:', data);
                // Here you can add the code to save the updated data back to the server
                // Then refresh the page or regenerate the forms
            });
        }
    </script>
</body>
</html>
